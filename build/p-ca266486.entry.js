import{r as t,c as i,h as o,a as e}from"./p-a7779090.js";const s=class{constructor(o){t(this,o),this.ionInput=i(this,"ionInput",7),this.floodteamAddressMode=i(this,"floodteamAddressMode",7),this.floodteamUpdateAutoHeight=i(this,"floodteamUpdateAutoHeight",7),this.value={},this.manualEntry=!1}onChange(){this.manualEntry&&setTimeout((()=>{const t=`${this.streetInputEl.value},${this.unitInputEl.value?` ${this.unitInputEl.value},`:""} ${this.cityInputEl.value}, ${this.stateSelectEl.querySelector("ion-select").value} ${this.zipInputEl.value}`;this.autocompleteFieldEl.value=t,this.value.full=t,this.ionInput.emit({name:this.name,value:this.value})}),100)}async componentDidLoad(){const t=await this.autocompleteFieldEl.getInputElement();setTimeout((()=>{t.setAttribute("autocomplete","new-password")}),200);const i=new google.maps.places.Autocomplete(t,{types:["address"]});google.maps.event.addListener(i,"place_changed",(()=>{var t,o,e,s,n,a,d;this.place=i.getPlace(),this.value||(this.value={}),this.value.full=this.place.formatted_address;let l="";this.value.placeId=null===(t=this.place)||void 0===t?void 0:t.place_id,this.value.lat=null===(s=null===(e=null===(o=this.place)||void 0===o?void 0:o.geometry)||void 0===e?void 0:e.location)||void 0===s?void 0:s.lat(),this.value.lng=null===(d=null===(a=null===(n=this.place)||void 0===n?void 0:n.geometry)||void 0===a?void 0:a.location)||void 0===d?void 0:d.lng(),this.place.address_components.map(((t,i)=>{-1!==t.types.indexOf("street_number")&&(l=t.long_name),-1!==t.types.indexOf("route")&&(l=l+" "+t.long_name),-1!==t.types.indexOf("locality")&&(this.value.city=t.long_name),-1!==t.types.indexOf("postal_code")&&(this.value.zip=t.short_name),-1!==t.types.indexOf("administrative_area_level_1")&&(this.value.state=t.short_name),this.place.address_components.length===i+1&&(this.value.street=l),i===this.place.address_components.length-1&&setTimeout((()=>{this.ionInput.emit({name:this.name,value:this.value})}),10)}))}))}toggleManualEntry(){this.manualEntry=!this.manualEntry,this.manualEntry&&(this.value={city:this.cityInputEl.value,country:"US",full:this.autocompleteFieldEl.value,state:this.stateSelectEl.value,street:this.streetInputEl.value,unit:this.unitInputEl.value,zip:this.zipInputEl.value}),this.floodteamAddressMode.emit({maual:this.manualEntry}),this.floodteamUpdateAutoHeight.emit(),setTimeout((()=>{this.addressAutocompleteEl.forceUpdate()}),0)}render(){const t=this.value?this.value:{};return[o("ion-item",{class:{"is-hidden":!this.manualEntry}},o("ion-label",{position:"stacked"},this.label),o("div",{class:"manual-fields"},o("ion-input",{ref:t=>this.streetInputEl=t,type:"text",name:this.name+".street",placeholder:"Street Address",value:t.street,required:this.required&&this.manualEntry}),o("ion-input",{ref:t=>this.unitInputEl=t,type:"text",name:this.name+".unit",placeholder:"Street Address 2",value:t.unit}),o("ion-input",{ref:t=>this.cityInputEl=t,type:"text",name:this.name+".city",placeholder:"City",value:t.city,required:this.required&&this.manualEntry}),o("ion-grid",null,o("ion-row",null,o("ion-col",{size:"6"},o("floodteam-input-state",{ref:t=>this.stateSelectEl=t,name:this.name+".state",value:t.state,placeholder:"State"})),o("ion-col",{size:"6"},o("ion-input",{ref:t=>this.zipInputEl=t,class:"zip-input",type:"tel",name:this.name+".zip",min:"0",max:"999999",value:t.zip,placeholder:"Zip Code",required:this.required&&this.manualEntry}))))),o("ion-button",{fill:"clear",color:"primary",onClick:()=>this.toggleManualEntry(),slot:"end"},o("span",{class:"button-inner"},"Search",o("ion-icon",{name:"search"})))),o("ion-item",{class:{"is-hidden":this.manualEntry}},o("ion-label",{position:"stacked"},this.label),o("ion-input",{ref:t=>this.autocompleteFieldEl=t,class:"autocomplete-field",type:"text",placeholder:this.placeholder,value:t.full,autocomplete:"off",required:this.required&&!this.manualEntry}),o("ion-button",{fill:"clear",color:"primary",onClick:()=>this.toggleManualEntry(),slot:"end"},o("span",{class:"button-inner"},"Manual",o("ion-icon",{name:"create"}))))]}get addressAutocompleteEl(){return e(this)}};s.style="floodteam-input-address ion-label{font-size:12px;font-weight:bold;font-family:arial;display:block;background:transparent;text-align:left;padding:0 0 8px 0}floodteam-input-address .invalid .input-wrapper{border-bottom-color:var(--theme-red) !important}floodteam-input-address .invalid .label{color:var(--theme-red) !important}floodteam-input-address ion-item{position:relative;border-bottom:none !important;box-shadow:none !important}floodteam-input-address ion-item.is-hidden{display:none}floodteam-input-address ion-item ion-label{color:var(--theme-dark-grey) !important}floodteam-input-address ion-item ion-input{border:none;box-shadow:none !important;outline:none !important;font-size:16px;font-weight:normal !important}floodteam-input-address ion-item.item-has-focus{--border-width:0;border-color:var(--theme-blue)}floodteam-input-address ion-item.item-has-focus ion-label{color:var(--theme-blue) !important}floodteam-input-address ion-input.autocomplete-field{--padding-top:13px !important}floodteam-input-address ion-button{text-decoration:none;position:absolute;right:0px;top:3px;z-index:3}floodteam-input-address ion-button .button-inner{font-size:14px;color:var(--theme-blue);padding-right:25px}floodteam-input-address ion-button ion-icon{position:absolute;top:6px;right:10px;color:var(--theme-blue)}floodteam-input-address .manual-fields{width:100%;padding-top:5px}floodteam-input-address .manual-fields ion-input{--padding-top:8px;--padding-bottom:8px;--padding-start:17px}floodteam-input-address .manual-fields ion-grid floodbot-state-autocomplete,floodteam-input-address .manual-fields ion-grid ion-input{display:block;min-width:150px}floodteam-input-address .autocomplete-field{display:block;padding-top:8px}floodteam-input-address .manual-fields ion-grid,floodteam-input-address .manual-fields ion-grid ion-row ion-col{padding-bottom:0 !important;padding-top:0 !important}floodteam-input-address .manual-fields ion-input:not(.zip-input){border-bottom:1px solid var(--theme-grey-light, #eee) !important}";export{s as floodteam_input_address}