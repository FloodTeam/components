import{r as t,c as i,h as o}from"./p-a7779090.js";import{c as n,b as a}from"./p-dfe5a97d.js";import{f as e}from"./p-99b9854b.js";import"./p-eb85c436.js";import"./p-f2660943.js";import"./p-159f073c.js";var s=n((function(t,i){function o(t){var i=arguments.length<=1||void 0===arguments[1]?500:arguments[1],o=void 0;function n(){for(var a=this,e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];n.clear(),o=setTimeout((function(){o=null,t.apply(a,s)}),i)}return n.clear=function(){o&&(clearTimeout(o),o=null)},n}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return function(i,n,a){return{configurable:!0,enumerable:a.enumerable,get:function(){return Object.defineProperty(this,n,{configurable:!0,enumerable:a.enumerable,value:o(a.value,t)}),this[n]}}}},i.debounce=o,i.DEFAULT_DEBOUNCE_DURATION=500}));const r=a(n((function(t,i){function o(t,i){for(var o=Object.getOwnPropertyNames(i),n=0;n<o.length;n++){var a=o[n],e=Object.getOwnPropertyDescriptor(i,a);e&&e.configurable&&void 0===t[a]&&Object.defineProperty(t,a,e)}return t}Object.defineProperty(i,"__esModule",{value:!0});var n,a,e=(n=s)&&n.__esModule?n:{default:n};i.default=e.default,o(i,(delete(a=o({},s)).default,a))})));const l=class{constructor(o){t(this,o),this.ionInput=i(this,"ionInput",7),this.fireenjinFetch=i(this,"fireenjinFetch",7),this.type="email",this.searchParams={},this.disableSearch=!1,this.mode="popover",this.results=[]}async checkValidity(t){return(this.required||t&&t.setValidationClass)&&await this.setValidationClass(t&&t.validationClassOptions?t.validationClassOptions:null),!this.inputEl||await(await this.inputEl.getInputElement()).checkValidity()}async reportValidity(){const t=!this.inputEl||await(await this.inputEl.getInputElement()).reportValidity();return this.inputEl.classList[t?"remove":"add"]("invalid"),await this.setValidationClass(),t}async onBlur(){const t=await this.checkValidity();this.inputEl.classList[t?"remove":"add"]("invalid"),await this.setValidationClass()}async onSuccess(t){var i,o,n;console.log(this.mode,t.detail.data),t.detail.endpoint===this.endpoint&&(null===(n=null===(o=null===(i=t.detail)||void 0===i?void 0:i.data)||void 0===o?void 0:o.results)||void 0===n?void 0:n.length)>0&&"popover"===this.mode?(this.resultsPopover=await e.create({translucent:!0,showBackdrop:!1,event:t.detail.event,component:"floodteam-input-search-popover",componentProps:{results:t.detail.data.results?t.detail.data.results:[],template:this.template}}),this.resultsPopover.present()):this.results=t.detail.data.results?t.detail.data.results:[]}onInput(t){var i,o;this.disableSearch||(null===(o=null===(i=null==t?void 0:t.target)||void 0===i?void 0:i.value)||void 0===o?void 0:o.length)<=1||this.fireenjinFetch.emit({event:t,endpoint:this.endpoint,params:{data:Object.assign({query:t.target.value},this.searchParams)},dataPropsMap:this.dataPropsMap})}async clearResults(){return this.results=[]}async closePopover(){return this.resultsPopover.dismiss()}async openPopover(){return this.resultsPopover.present()}async setValidationClass(t){const i=Object.values(this.itemEl.classList);i.indexOf("invalid")>=0&&this.itemEl.classList.remove("invalid"),i.indexOf("valid")>=0&&this.itemEl.classList.remove("valid");const o=await(await this.inputEl.getInputElement()).checkValidity();(!t||!t.ignoreInvalid||t&&t.ignoreInvalid&&o)&&this.itemEl.classList.add(o?"valid":"invalid")}render(){var t;return[o("ion-item",{class:"search-input",ref:t=>this.itemEl=t,onClick:t=>this.onInput(t)},o("slot",{name:"start"}),this.iconStart&&o("ion-icon",{name:this.iconStart,slot:"start"}),this.label&&o("ion-label",{position:"stacked"},this.label),o("ion-input",{onInput:t=>this.onInput(t),ref:t=>this.inputEl=t,disabled:this.disabled,type:this.type,name:this.name,placeholder:this.placeholder,required:this.required,autofocus:this.autofocus,value:this.value}),this.iconEnd&&o("ion-icon",{name:this.iconEnd,slot:"end"}),o("slot",{name:"end"})),"inline"===this.mode&&(null===(t=this.results)||void 0===t?void 0:t.length)?this.results.map((t=>this.template(t))):null]}};(function(t,i,o,n){var a,e=arguments.length,s=e<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,i,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(e<3?a(s):e>3?a(i,o,s):a(i,o))||s);e>3&&s&&Object.defineProperty(i,o,s)})([r(1e3)],l.prototype,"onInput",null),l.style='floodteam-input-search .search-input ion-label{color:var(--theme-dark-grey) !important;font-size:12px;font-weight:bold;text-transform:uppercase;font-family:arial;display:block;background:transparent;text-align:left;padding:0 0 8px 0;font-family:var(--theme-font-primary)}floodteam-input-search ion-icon{color:var(--ion-text-color)}floodteam-input-search .search-input ion-icon[slot="start"]{margin-right:5px}floodteam-input-search .search-input [slot="end"]{margin-left:5px}floodteam-input-search .invalid{--border-color:var(--ion-color-danger) !important}floodteam-input-search .invalid ion-label{color:var(--ion-color-danger) !important}floodteam-input-search .valid{--border-color:var(--ion-color-success) !important}floodteam-input-search .valid ion-label{color:var(--ion-color-success) !important}';export{l as floodteam_input_search}