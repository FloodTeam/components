import{r as t,h as n}from"./p-8f2d27d2.js";import{G as r}from"./p-86931393.js";import{c as e,a as o}from"./p-3e8ff66b.js";var i=e((function(t){
/*! algoliasearch-lite.umd.js | 4.12.0 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */
t.exports=function(){function t(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function n(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}function r(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(Object(o),!0).forEach((function(n){t(r,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))}))}return r}function e(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],e=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(e=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(t){o=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(o)throw i}}return r}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t){return function(t){if(Array.isArray(t)){for(var n=0,r=new Array(t.length);n<t.length;n++)r[n]=t[n];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t){var n,r="algoliasearch-client-js-".concat(t.key),o=function(){return void 0===n&&(n=t.localStorage||window.localStorage),n},i=function(){return JSON.parse(o().getItem(r)||"{}")};return{get:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){var r=JSON.stringify(t),e=i()[r];return Promise.all([e||n(),void 0!==e])})).then((function(t){var n=e(t,2),o=n[0];return Promise.all([o,n[1]||r.miss(o)])})).then((function(t){return e(t,1)[0]}))},set:function(t,n){return Promise.resolve().then((function(){var e=i();return e[JSON.stringify(t)]=n,o().setItem(r,JSON.stringify(e)),n}))},delete:function(t){return Promise.resolve().then((function(){var n=i();delete n[JSON.stringify(t)],o().setItem(r,JSON.stringify(n))}))},clear:function(){return Promise.resolve().then((function(){o().removeItem(r)}))}}}function u(t){var n=o(t.caches),r=n.shift();return void 0===r?{get:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return n().then((function(t){return Promise.all([t,r.miss(t)])})).then((function(t){return e(t,1)[0]}))},set:function(t,n){return Promise.resolve(n)},delete:function(){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(t,e,o).catch((function(){return u({caches:n}).get(t,e,o)}))},set:function(t,e){return r.set(t,e).catch((function(){return u({caches:n}).set(t,e)}))},delete:function(t){return r.delete(t).catch((function(){return u({caches:n}).delete(t)}))},clear:function(){return r.clear().catch((function(){return u({caches:n}).clear()}))}}}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},n={};return{get:function(r,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},i=JSON.stringify(r);if(i in n)return Promise.resolve(t.serializable?JSON.parse(n[i]):n[i]);var u=e(),a=o&&o.miss||function(){return Promise.resolve()};return u.then((function(t){return a(t)})).then((function(){return u}))},set:function(r,e){return n[JSON.stringify(r)]=t.serializable?JSON.stringify(e):e,Promise.resolve(e)},delete:function(t){return delete n[JSON.stringify(t)],Promise.resolve()},clear:function(){return n={},Promise.resolve()}}}function c(t){for(var n=t.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),e=t[n];t[n]=t[r],t[r]=e}return t}function s(t,n){return n?(Object.keys(n).forEach((function(r){t[r]=n[r](t)})),t):t}function f(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];var o=0;return t.replace(/%s/g,(function(){return encodeURIComponent(r[o++])}))}var l=0,m=1;function h(t,n){var r=t||{},e=r.data||{};return Object.keys(r).forEach((function(t){-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(t)&&(e[t]=r[t])})),{data:Object.entries(e).length>0?e:void 0,timeout:r.timeout||n,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var d={Read:1,Write:2,Any:3};function v(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return r(r({},t),{},{status:n,lastUpdate:Date.now()})}function p(t){return"string"==typeof t?{protocol:"https",url:t,accept:d.Any}:{protocol:t.protocol||"https",url:t.url,accept:t.accept||d.Any}}var b="GET",g="POST";function y(t,n,e,i){var u=[],a=function(t,n){if(t.method!==b&&(void 0!==t.data||void 0!==n.data)){var e=Array.isArray(t.data)?t.data:r(r({},t.data),n.data);return JSON.stringify(e)}}(e,i),c=function(t,n){var e=r(r({},t.headers),n.headers),o={};return Object.keys(e).forEach((function(t){var n=e[t];o[t.toLowerCase()]=n})),o}(t,i),s=e.method,f=e.method!==b?{}:r(r({},e.data),i.data),l=r(r(r({"x-algolia-agent":t.userAgent.value},t.queryParameters),f),i.queryParameters),m=0,h=function n(r,o){var f=r.pop();if(void 0===f)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:w(u)};var h={data:a,headers:c,method:s,url:j(f,e.path,l),connectTimeout:o(m,t.timeouts.connect),responseTimeout:o(m,i.timeout)},d=function(t){var n={request:h,response:t,host:f,triesLeft:r.length};return u.push(n),n},p={onSuccess:function(t){return function(t){try{return JSON.parse(t.content)}catch(n){throw function(t,n){return{name:"DeserializationError",message:t,response:n}}(n.message,t)}}(t)},onRetry:function(e){var i=d(e);return e.isTimedOut&&m++,Promise.all([t.logger.info("Retryable failure",S(i)),t.hostsCache.set(f,v(f,e.isTimedOut?3:2))]).then((function(){return n(r,o)}))},onFail:function(t){throw d(t),function(t,n){var r=t.content,e=t.status,o=r;try{o=JSON.parse(r).message}catch(t){}return function(t,n,r){return{name:"ApiError",message:t,status:n,transporterStackTrace:r}}(o,e,n)}(t,w(u))}};return t.requester.send(h).then((function(t){return function(t,n){return function(t){var n=t.status;return t.isTimedOut||function(t){return!t.isTimedOut&&0==~~t.status}(t)||2!=~~(n/100)&&4!=~~(n/100)}(t)?n.onRetry(t):2==~~(t.status/100)?n.onSuccess(t):n.onFail(t)}(t,p)}))};return function(t,n){return Promise.all(n.map((function(n){return t.get(n,(function(){return Promise.resolve(v(n))}))}))).then((function(t){var r=t.filter((function(t){return function(t){return 1===t.status||Date.now()-t.lastUpdate>12e4}(t)})),e=t.filter((function(t){return function(t){return 3===t.status&&Date.now()-t.lastUpdate<=12e4}(t)})),i=[].concat(o(r),o(e));return{getTimeout:function(t,n){return(0===e.length&&0===t?1:e.length+3+t)*n},statelessHosts:i.length>0?i.map((function(t){return p(t)})):n}}))}(t.hostsCache,n).then((function(t){return h(o(t.statelessHosts).reverse(),t.getTimeout)}))}function O(t){var n={value:"Algolia for JavaScript (".concat(t,")"),add:function(t){var r="; ".concat(t.segment).concat(void 0!==t.version?" (".concat(t.version,")"):"");return-1===n.value.indexOf(r)&&(n.value="".concat(n.value).concat(r)),n}};return n}function j(t,n,r){var e=P(r),o="".concat(t.protocol,"://").concat(t.url,"/").concat("/"===n.charAt(0)?n.substr(1):n);return e.length&&(o+="?".concat(e)),o}function P(t){return Object.keys(t).map((function(n){return f("%s=%s",n,(r=t[n],"[object Object]"===Object.prototype.toString.call(r)||"[object Array]"===Object.prototype.toString.call(r)?JSON.stringify(t[n]):t[n]));var r})).join("&")}function w(t){return t.map((function(t){return S(t)}))}function S(t){var n=t.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return r(r({},t),{},{request:r(r({},t.request),{},{headers:r(r({},t.request.headers),n)})})}var q=function(t){var n=t.appId,o=function(t,n,r){var e={"x-algolia-api-key":r,"x-algolia-application-id":n};return{headers:function(){return t===m?e:{}},queryParameters:function(){return t===l?e:{}}}}(void 0!==t.authMode?t.authMode:m,n,t.apiKey),i=function(t){var n={hostsCache:t.hostsCache,logger:t.logger,requester:t.requester,requestsCache:t.requestsCache,responsesCache:t.responsesCache,timeouts:t.timeouts,userAgent:t.userAgent,headers:t.headers,queryParameters:t.queryParameters,hosts:t.hosts.map((function(t){return p(t)})),read:function(t,r){var o=h(r,n.timeouts.read),i=function(){return y(n,n.hosts.filter((function(t){return 0!=(t.accept&d.Read)})),t,o)};if(!0!==(void 0!==o.cacheable?o.cacheable:t.cacheable))return i();var u={request:t,mappedRequestOptions:o,transporter:{queryParameters:n.queryParameters,headers:n.headers}};return n.responsesCache.get(u,(function(){return n.requestsCache.get(u,(function(){return n.requestsCache.set(u,i()).then((function(t){return Promise.all([n.requestsCache.delete(u),t])}),(function(t){return Promise.all([n.requestsCache.delete(u),Promise.reject(t)])})).then((function(t){return e(t,2)[1]}))}))}),{miss:function(t){return n.responsesCache.set(u,t)}})},write:function(t,r){return y(n,n.hosts.filter((function(t){return 0!=(t.accept&d.Write)})),t,h(r,n.timeouts.write))}};return n}(r(r({hosts:[{url:"".concat(n,"-dsn.algolia.net"),accept:d.Read},{url:"".concat(n,".algolia.net"),accept:d.Write}].concat(c([{url:"".concat(n,"-1.algolianet.com")},{url:"".concat(n,"-2.algolianet.com")},{url:"".concat(n,"-3.algolianet.com")}]))},t),{},{headers:r(r(r({},o.headers()),{"content-type":"application/x-www-form-urlencoded"}),t.headers),queryParameters:r(r({},o.queryParameters()),t.queryParameters)}));return s({transporter:i,appId:n,addAlgoliaAgent:function(t,n){i.userAgent.add({segment:t,version:n})},clearCache:function(){return Promise.all([i.requestsCache.clear(),i.responsesCache.clear()]).then((function(){}))}},t.methods)},T=function(t){return function(n,r){return n.method===b?t.transporter.read(n,r):t.transporter.write(n,r)}},x=function(t){return function(n){return s({transporter:t.transporter,appId:t.appId,indexName:n},(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).methods)}},N=function(t){return function(n,e){var o=n.map((function(t){return r(r({},t),{},{params:P(t.params||{})})}));return t.transporter.read({method:g,path:"1/indexes/*/queries",data:{requests:o},cacheable:!0},e)}},A=function(t){return function(n,e){return Promise.all(n.map((function(n){var o=n.params,i=o.facetName,u=o.facetQuery,a=function(t,n){if(null==t)return{};var r,e,o=function(t,n){if(null==t)return{};var r,e,o={},i=Object.keys(t);for(e=0;e<i.length;e++)n.indexOf(r=i[e])>=0||(o[r]=t[r]);return o}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(e=0;e<i.length;e++)n.indexOf(r=i[e])>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(o,["facetName","facetQuery"]);return x(t)(n.indexName,{methods:{searchForFacetValues:F}}).searchForFacetValues(i,u,r(r({},e),a))})))}},J=function(t){return function(n,r,e){return t.transporter.read({method:g,path:f("1/answers/%s/prediction",t.indexName),data:{query:n,queryLanguages:r},cacheable:!0},e)}},C=function(t){return function(n,r){return t.transporter.read({method:g,path:f("1/indexes/%s/query",t.indexName),data:{query:n},cacheable:!0},r)}},F=function(t){return function(n,r,e){return t.transporter.read({method:g,path:f("1/indexes/%s/facets/%s/query",t.indexName,n),data:{facetQuery:r},cacheable:!0},e)}};function k(t,n,e){var o={appId:t,apiKey:n,timeouts:{connect:1,read:2,write:30},requester:{send:function(t){return new Promise((function(n){var r=new XMLHttpRequest;r.open(t.method,t.url,!0),Object.keys(t.headers).forEach((function(n){return r.setRequestHeader(n,t.headers[n])}));var e,o=function(t,e){return setTimeout((function(){r.abort(),n({status:0,content:e,isTimedOut:!0})}),1e3*t)},i=o(t.connectTimeout,"Connection timeout");r.onreadystatechange=function(){r.readyState>r.OPENED&&void 0===e&&(clearTimeout(i),e=o(t.responseTimeout,"Socket timeout"))},r.onerror=function(){0===r.status&&(clearTimeout(i),clearTimeout(e),n({content:r.responseText||"Network request failed",status:r.status,isTimedOut:!1}))},r.onload=function(){clearTimeout(i),clearTimeout(e),n({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(t.data)}))}},logger:(3,{debug:function(){return Promise.resolve()},info:function(){return Promise.resolve()},error:function(t,n){return console.error(t,n),Promise.resolve()}}),responsesCache:a(),requestsCache:a({serializable:!1}),hostsCache:u({caches:[i({key:"".concat("4.12.0","-").concat(t)}),a()]}),userAgent:O("4.12.0").add({segment:"Browser",version:"lite"}),authMode:l};return q(r(r(r({},o),e),{},{methods:{search:N,searchForFacetValues:A,multipleQueries:N,multipleSearchForFacetValues:A,customRequest:T,initIndex:function(t){return function(n){return x(t)(n,{methods:{search:C,searchForFacetValues:F,findAnswers:J}})}}}}))}return k.version="4.12.0",k}()}));let u=class{constructor(n){t(this,n),this.algoliaAppId="ZKFP93O6EH",this.algoliaSearchKey="cef2b52143823594c9c5af78ad86bcf0",this.algoliaIndex="locations",this.endOfSearch=!1,this.searchResults=[],this.resultCount=0,this.searchResultPages=0,this.changingLocation=!1}getLocationCoords(t){try{r.getCurrentPosition().then((n=>{t&&"function"==typeof t&&t(n.coords)})).catch((async n=>{console.log(n),fetch("http://ip-api.com/json").then((async n=>{const r=await n.json();t({latitude:r.lat,longitude:r.lon})})),t&&"function"==typeof t&&t(!1)}))}catch(n){t(!1)}}search(t,n){return i(this.algoliaAppId,this.algoliaSearchKey).initIndex(this.algoliaIndex).search(t,Object.assign(Object.assign({},n),{facetFilters:[["isSearchable:true"]]}))}resetSearchOptions(){this.query="",this.endOfSearch=!1,this.searchOptions=this.searchOptions?this.searchOptions:{},this.searchOptions.page=0,this.position&&(this.searchOptions.aroundLatLng=`${this.position.latitude}, ${this.position.longitude}`)}async componentDidLoad(){setTimeout((async()=>{this.getLocationCoords((t=>{this.position=t||{latitude:38.6270025,longitude:-90.19940419999999},this.resetSearchOptions(),this.search(this.query,this.searchOptions).then((t=>{this.searchResultPages=parseInt(t.nbPages,10),this.searchResults=t.hits,this.resultCount=t.nbHits})).catch((t=>{console.log(t.message)}))}))}),100)}render(){return n("ion-grid",null,n("ion-row",{class:"ion-align-items-center"},n("ion-col",{size:"12",sizeLg:"6"},n("ion-icon",{name:"navigate",class:"ft-icon-style"}),!this.changingLocation&&n("h4",{class:"location-city"},"O’Fallon"),!this.changingLocation&&n("a",{href:"#",onClick:()=>this.changingLocation=!0},"Change Location"),this.changingLocation&&n("fireenjin-form",{hideControls:!0},n("fireenjin-input",{name:"query",value:this.query,placeholder:"Enter Zip"}),n("ion-button",{onClick:()=>this.changingLocation=!1},"Set"))),n("ion-col",{size:"12",sizeLg:"6"},n("h4",null,"Call now:"," ",n("a",{href:"tel:+13143103064",class:"location-phone"},"314-310-3064")))))}};u.style="floodteam-location-bar ion-grid{background-color:var(--ion-color-tertiary)}floodteam-location-bar ion-col:first-of-type{display:flex;align-items:center}floodteam-location-bar ion-col:first-of-type *{margin-right:10px}floodteam-location-bar ion-col:first-of-type a{margin-left:10px}floodteam-location-bar h4{text-align:right;color:#fff;font-family:var(--ion-font-family);font-size:1em;font-weight:700;line-height:24px;letter-spacing:normal}floodteam-location-bar .ion-align-items-center a{color:var(--ion-color-success-tint)}floodteam-location-bar fireenjin-form{display:flex;align-items:flex-end}floodteam-location-bar ion-input{color:#fff !important}";export{u as floodteam_location_bar}