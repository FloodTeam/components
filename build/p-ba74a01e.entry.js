import{r as i,c as t,B as o,h as e,d as n}from"./p-8710117e.js";import{L as s}from"./p-29d0604b.js";const a=class{constructor(o){i(this,o),this.ionInput=t(this,"ionInput",7),this.fireenjinAddressMode=t(this,"fireenjinAddressMode",7),this.fireenjinUpdateAutoHeight=t(this,"fireenjinUpdateAutoHeight",7),this.value={},this.manualEntry=!1}onChange(){var i,t;this.manualEntry?setTimeout((()=>{const i=`${this.streetInputEl.value},${this.unitInputEl.value?` ${this.unitInputEl.value},`:""} ${this.cityInputEl.value}, ${this.stateSelectEl.querySelector("ion-select").value} ${this.zipInputEl.value}`;this.autocompleteFieldEl.value=i,this.value.full=i,this.ionInput.emit({name:this.name,value:this.value})}),100):(null===(i=this.value)||void 0===i?void 0:i.full)&&!(null===(t=this.autocompleteFieldEl)||void 0===t?void 0:t.value)&&(this.value=null,this.ionInput.emit({name:this.name,value:this.value}))}sleep(i){return new Promise((t=>setTimeout(t,i)))}async loadGoogleMaps(i){if(null===window||void 0===window?void 0:window.google)return window.google;if(null===window||void 0===window?void 0:window._dk_google_maps_loader_cb)return await this.sleep(200),this.loadGoogleMaps();try{return new s(this.googleMapsKey,Object.assign({libraries:["places"]},i)).load()}catch(i){console.log(i),setTimeout(this.loadGoogleMaps.bind(this),2e3)}}async componentDidLoad(){if(!(null==o?void 0:o.isBrowser)||!this.googleMapsKey)return;this.google=await this.loadGoogleMaps();const i=await this.autocompleteFieldEl.getInputElement();setTimeout((()=>{const t=new this.google.maps.places.Autocomplete(i,{types:["address"]});this.google.maps.event.addListener(t,"place_changed",(()=>{var i,o,e,n,s,a,l;this.place=t.getPlace(),this.value||(this.value={}),this.value.full=this.place.formatted_address;let r="";this.value.placeId=null===(i=this.place)||void 0===i?void 0:i.place_id,this.value.lat=null===(n=null===(e=null===(o=this.place)||void 0===o?void 0:o.geometry)||void 0===e?void 0:e.location)||void 0===n?void 0:n.lat(),this.value.lng=null===(l=null===(a=null===(s=this.place)||void 0===s?void 0:s.geometry)||void 0===a?void 0:a.location)||void 0===l?void 0:l.lng(),this.place.address_components.map(((i,t)=>{-1!==i.types.indexOf("street_number")&&(r=i.long_name),-1!==i.types.indexOf("route")&&(r=r+" "+i.long_name),-1!==i.types.indexOf("locality")&&(this.value.city=i.long_name),-1!==i.types.indexOf("postal_code")&&(this.value.zip=i.short_name),-1!==i.types.indexOf("administrative_area_level_1")&&(this.value.state=i.short_name),this.place.address_components.length===t+1&&(this.value.street=r),t===this.place.address_components.length-1&&setTimeout((()=>{this.ionInput.emit({name:this.name,value:this.value})}),10)}))}))}),200)}toggleManualEntry(){this.manualEntry=!this.manualEntry,this.manualEntry&&(this.value={city:this.cityInputEl.value,country:"US",full:this.autocompleteFieldEl.value,state:this.stateSelectEl.value,street:this.streetInputEl.value,unit:this.unitInputEl.value,zip:this.zipInputEl.value}),this.fireenjinAddressMode.emit({maual:this.manualEntry}),this.fireenjinUpdateAutoHeight.emit()}render(){const i=this.value?this.value:{};return[e("ion-item",{lines:this.lines,class:{"is-hidden":!this.manualEntry}},e("ion-label",{position:this.labelPosition},this.label),e("div",{class:"manual-fields"},e("ion-input",{ref:i=>this.streetInputEl=i,type:"text",name:this.name+".street",placeholder:"Street Address",value:i.street,required:this.required&&this.manualEntry}),e("ion-input",{ref:i=>this.unitInputEl=i,type:"text",name:this.name+".unit",placeholder:"Street Address 2",value:i.unit}),e("ion-input",{ref:i=>this.cityInputEl=i,type:"text",name:this.name+".city",placeholder:"City",value:i.city,required:this.required&&this.manualEntry}),e("ion-grid",null,e("ion-row",null,e("ion-col",{size:"6"},e("fireenjin-input-state",{ref:i=>this.stateSelectEl=i,name:this.name+".state",value:i.state,placeholder:"State"})),e("ion-col",{size:"6"},e("ion-input",{ref:i=>this.zipInputEl=i,class:"zip-input",type:"tel",name:this.name+".zip",min:"0",max:"999999",value:i.zip,placeholder:"Zip Code",required:this.required&&this.manualEntry}))))),e("ion-button",{fill:"clear",color:"primary",onClick:()=>this.toggleManualEntry(),slot:"end"},"Search")),e("ion-item",{class:{"is-hidden":this.manualEntry}},e("ion-label",{position:"stacked"},this.label),e("ion-input",{ref:i=>this.autocompleteFieldEl=i,class:"autocomplete-field",type:"text",placeholder:this.placeholder,value:i.full,autocomplete:"off",required:this.required&&!this.manualEntry}),e("ion-button",{fill:"clear",color:"primary",onClick:()=>this.toggleManualEntry(),slot:"end"},"Manual"))]}get addressAutocompleteEl(){return n(this)}};a.style="ion-label{font-size:12px;font-weight:bold;font-family:arial;display:block;background:transparent;text-align:left;padding:0 0 8px 0}.invalid .input-wrapper{border-bottom-color:var(--ion-color-danger) !important}.invalid .label{color:var(--ion-color-danger) !important}ion-item{position:relative;border-bottom:none !important;box-shadow:none !important}ion-item.is-hidden{display:none}ion-item ion-label{color:var(--ion-color-medium) !important}ion-item ion-input{border:none;box-shadow:none !important;outline:none !important;font-size:16px;font-weight:normal !important}ion-item.item-has-focus{--border-width:0;border-color:var(--ion-color-primary)}ion-item.item-has-focus ion-label{color:var(--ion-color-primary) !important}ion-input.autocomplete-field{--padding-top:13px !important}ion-button{text-decoration:none;position:absolute;right:0px;top:3px;z-index:3}ion-button .button-inner{font-size:14px;color:var(--ion-color-primary);padding-right:25px}ion-button ion-icon{position:absolute;top:6px;right:10px;color:var(--ion-color-primary)}.manual-fields{width:100%;padding-top:5px}.manual-fields ion-input{--padding-top:8px;--padding-bottom:8px;--padding-start:17px}.manual-fields ion-grid floodbot-state-autocomplete,.manual-fields ion-grid ion-input{display:block;min-width:150px}.autocomplete-field{display:block;padding-top:8px}.manual-fields ion-grid,.manual-fields ion-grid ion-row ion-col{padding-bottom:0 !important;padding-top:0 !important}.manual-fields ion-input:not(.zip-input){border-bottom:1px solid var(--ion-color-light-shade, #eee) !important}";const l=class{constructor(t){i(this,t),this.stateList={AK:"Alaska",AL:"Alabama",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:" North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"}}componentDidLoad(){(null==o?void 0:o.isBrowser)&&(this.stateAutocompleteEl.querySelector("ion-select").interfaceOptions={header:"State"})}render(){return e("ion-select",{color:"primary",name:this.name,value:this.value,"ok-text":"Select","cancel-text":"Cancel",placeholder:this.placeholder},Object.keys(this.stateList).map((i=>e("ion-select-option",{value:i},this.stateList[i]))))}get stateAutocompleteEl(){return n(this)}};l.style="fireenjin-input-state ion-select{color:var(--ion-color-dark);font-family:var(--ion-font-family);--padding-start:0;max-width:auto}";export{a as fireenjin_input_address,l as fireenjin_input_state}