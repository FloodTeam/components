import{r as e,c as i,h as t,a as o}from"./p-a7779090.js";const r=class{constructor(t){e(this,t),this.floodteamUploadFile=i(this,"floodteamUploadFile",7),this.floodteamUpload=i(this,"floodteamUpload",7),this.ionInput=i(this,"ionInput",7),this.type="file",this.endpoint="upload",this.dragOver=!1}onFileChange(){if(!this.value)return!1;this.ionInput.emit({name:this.name,value:this.value})}async openFile(){const e=this.fileUploaderEl.querySelector('input[type="file"]');return e.click(),e}uploadFile(e){if(this.isLoading=!0,!window.FileReader)return;const i=new FileReader;i.onload=async i=>{2==i.target.readyState&&(i.target.error?alert("Error while reading file"):this.floodteamUpload.emit({event:i,name:this.name,endpoint:this.endpoint,data:{id:this.documentId,type:this.type,fileName:this.fileName,file:e,path:this.path,encodedContent:i.target.result}}))},i.readAsDataURL(e)}selectFile(e){this.isLoading=!0;const i=e.target.files[0];this.selectedFile=i.name,this.uploadFile(i)}onDrop(e){if(e.preventDefault(),e.dataTransfer.items){for(var i=0;i<e.dataTransfer.items.length;i++)if("file"===e.dataTransfer.items[i].kind){var t=e.dataTransfer.items[i].getAsFile();this.selectedFile=t.name,this.uploadFile(t)}}else for(i=0;i<e.dataTransfer.files.length;i++){const t=e.dataTransfer.files[i];this.selectedFile=t.name,this.uploadFile(t),console.log("... file["+i+"].name = "+t.name)}this.dragOver=!1}onDrag(e){e.preventDefault()}onDragOver(e){e.preventDefault()}onDragEnter(e){console.log("Show UI to drop file",e),this.dragOver=!0}onDragLeave(e){console.log("Hide UI to drop file",e),this.dragOver=!1}render(){return t("ion-card",{class:{"drag-over":this.dragOver},onDragEnter:e=>this.onDragEnter(e),onDragOver:e=>this.onDragOver(e),onDrag:e=>this.onDrag(e),onDrop:e=>this.onDrop(e),onDragLeave:e=>this.onDragLeave(e),onClick:()=>this.openFile()},t("ion-item",{lines:"none"},t("ion-icon",{name:this.icon?this.icon:"document",slot:"start"}),t("div",null,t("h2",null,this.dragOver?"Drop File Here":this.label?this.label:"Upload a File"),t("p",null,this.selectedFile?this.selectedFile:this.defaultValue?this.defaultValue:"Select a letterhead"))),t("input",{type:"file",onChange:e=>this.selectFile(e),accept:this.accept?this.accept:null,value:"blah"}))}get fileUploaderEl(){return o(this)}static get watchers(){return{value:["onFileChange"]}}};r.style="floodteam-input-file ion-card{width:95%;margin:15px auto;background-color:var(--theme-lighter-grey);--background-color:var(--theme-lighter-grey);padding:0}floodteam-input-file ion-card.drag-over{opacity:0.8}floodteam-input-file ion-card ion-item{padding:5px 0;background-color:var(--theme-lighter-grey);--ion-color-base:var(--theme-lighter-grey);--background:var(--theme-lighter-grey);pointer-events:none}floodteam-input-file ion-card ion-item ion-icon{height:50px;width:50px;color:var(--theme-grey)}floodteam-input-file ion-card ion-item h2{font-size:20px;color:var(--theme-dark);margin:0}floodteam-input-file ion-card ion-item p{color:var(--theme-darker-grey);margin:0}floodteam-input-file ion-card:hover{cursor:pointer}floodteam-input-file ion-card:hover h2{color:var(--theme-blue)}floodteam-input-file ion-card:hover ion-icon{color:var(--theme-blue)}floodteam-input-file input{float:left;height:0;width:0;visibility:hidden}";export{r as floodteam_input_file}