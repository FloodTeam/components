import{r as i,c as o,h as n,H as l}from"./p-8710117e.js";const t=class{constructor(n){i(this,n),this.fireenjinTrigger=o(this,"fireenjinTrigger",7),this.filterNameToIndex={},this.modeToggle=!1,this.disabled=!1,this.showFilter=!0}onFiltersChange(){for(const[i,o]of(this.filters||[]).entries())this.filterNameToIndex[null==o?void 0:o.name]=i}async onTrigger(i){var o,n,l,t,r,a,e,s,d,h,c,v,u,p,b;if("set"===(null===(o=null==i?void 0:i.detail)||void 0===o?void 0:o.name)&&(null===(l=null===(n=null==i?void 0:i.detail)||void 0===n?void 0:n.payload)||void 0===l?void 0:l.name)&&!(null===(r=null===(t=null==i?void 0:i.detail)||void 0===t?void 0:t.payload)||void 0===r?void 0:r.clear)){const o=this.paginationEl.fetchData||{},n=this.filters||[];if(n[this.filterNameToIndex[null===(e=null===(a=null==i?void 0:i.detail)||void 0===a?void 0:a.payload)||void 0===e?void 0:e.name]].value=(null===(d=null===(s=null==i?void 0:i.detail)||void 0===s?void 0:s.payload)||void 0===d?void 0:d.value)||null,o[null===(c=null===(h=null==i?void 0:i.detail)||void 0===h?void 0:h.payload)||void 0===c?void 0:c.name]=(null===(u=null===(v=null==i?void 0:i.detail)||void 0===v?void 0:v.payload)||void 0===u?void 0:u.value)||null,this.filters=n,this.fetchData=o,this.paginationEl&&(this.paginationEl.fetchData=o),!(null===(p=this.paginationEl)||void 0===p?void 0:p.clearResults)||!(null===(b=this.paginationEl)||void 0===b?void 0:b.getResults))return;await this.paginationEl.clearResults(),await this.paginationEl.getResults()}}async onChange(i){var o,n,l;(null===(o=this.paginationEl)||void 0===o?void 0:o.clearParamData)&&("orderBy"===(null===(n=null==i?void 0:i.target)||void 0===n?void 0:n.name)&&(this.paginationEl.orderBy=i.detail.value),"ION-SEARCHBAR"===(null===(l=null==i?void 0:i.target)||void 0===l?void 0:l.tagName)&&(await this.paginationEl.clearParamData("next"),await this.paginationEl.clearParamData("back"),await this.paginationEl.clearParamData("page"),this.paginationEl.query=i.detail.value||""))}async clearFilter(i,o){var n,l,t,r,a;i.preventDefault(),i.stopPropagation(),(null===(n=this.paginationEl)||void 0===n?void 0:n.clearParamData)&&await this.paginationEl.clearParamData(null==o?void 0:o.name);const e=(null===(l=this.paginationEl)||void 0===l?void 0:l.fetchData)||{};e[null==o?void 0:o.name]&&delete e[o.name];const s=this.filters||[];s[this.filterNameToIndex[null==o?void 0:o.name]].value=null,this.filters=s,this.fetchData=e,this.fireenjinTrigger.emit({event:i,name:"set",payload:{clear:!0,name:o.name,value:null}});let d={fetchData:e};this.beforeGetResults&&"function"==typeof this.beforeGetResults&&(d=await this.beforeGetResults(d)),this.paginationEl&&!(null===(t=this.paginationEl)||void 0===t?void 0:t.disableFetch)&&(this.paginationEl.fetchData=e),(null===(r=this.paginationEl)||void 0===r?void 0:r.clearResults)&&await this.paginationEl.clearResults(),(null===(a=this.paginationEl)||void 0===a?void 0:a.getResults)&&await this.paginationEl.getResults(d)}getLabelForValue(i,o){for(const n of(null==i?void 0:i.options)||[])if((null==n?void 0:n.value)===o)return(null==n?void 0:n.label)?n.label:n.value}getControlLabel(i){const o=(null==i?void 0:i.value)?i.value:null;return o?Array.isArray(o)?o.map((o=>this.getLabelForValue(i,o))).join(", "):this.getLabelForValue(i,o):i.label}render(){var i,o,t,r;return n(l,null,n("div",{class:"search-bar-wrapper"},n("ion-searchbar",{disabled:this.disabled}),n("div",{class:"chip-bowl"},this.showFilter&&(null===(i=this.filters)||void 0===i?void 0:i.length)&&this.filters.map((i=>{var o,l;return n("ion-chip",{outline:!(null===(l=null===(o=this.filters)||void 0===o?void 0:o[null==i?void 0:i.name])||void 0===l?void 0:l.value),onClick:o=>this.fireenjinTrigger.emit({event:o,name:"filter",payload:{control:i}})},(null==i?void 0:i.icon)&&n("ion-icon",{name:i.icon}),(null==i?void 0:i.label)&&n("ion-label",null,this.getControlLabel(i)),(null==i?void 0:i.value)&&n("ion-icon",{name:"close-circle",onClick:o=>this.clearFilter(o,i)}))})))),(null===(o=this.filters)||void 0===o?void 0:o.length)&&n("ion-button",{onClick:()=>this.showFilter=!this.showFilter,class:"filter-button",size:"small",fill:"clear",shape:"round",style:{color:"var(--ion-text-color)"}},n("ion-icon",{name:"funnel",slot:"icon-only"}),(null===(t=this.filters)||void 0===t?void 0:t.length)&&n("ion-badge",{slot:"end"},(null===(r=this.filters)||void 0===r?void 0:r.length)||0)))}static get watchers(){return{filters:["onFiltersChange"]}}};t.style="fireenjin-search-bar{display:block;border:1px solid rgba(var(--ion-text-color-rgb), 0.6);border-radius:26px;position:relative;padding:5px 0}fireenjin-search-bar .search-bar-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-content:center}fireenjin-search-bar .chip-bowl{display:inline-flex;flex-wrap:nowrap;overflow-x:auto;overflow-y:hidden;align-content:center;margin:auto 10px auto auto;max-width:100%;padding-bottom:3px}fireenjin-search-bar .chip-bowl::-webkit-scrollbar{height:5px}fireenjin-search-bar .chip-bowl::-webkit-scrollbar-thumb{background:rgba(var(--ion-text-color-rgb), 0.6);border-radius:2px}fireenjin-search-bar .chip-bowl ion-chip{margin:auto 10px;border-color:rgba(var(--ion-text-color-rgb), 0.8);opacity:0.8}fireenjin-search-bar .chip-bowl ion-chip:hover{opacity:1}fireenjin-search-bar .chip-bowl ion-chip ion-icon{color:var(--ion-text-color);display:inline-block;opacity:0.6;height:20px;width:20px}fireenjin-search-bar .chip-bowl ion-chip:last-of-type{margin-right:50px}fireenjin-search-bar .filter-button{order:2;margin:auto 0;position:absolute;right:0px;top:12px}fireenjin-search-bar .filter-button ion-badge{border-radius:100%;font-size:8px;height:12px;width:12px;padding:2px}fireenjin-search-bar ion-searchbar{max-width:250px;padding-top:2px !important;padding-bottom:0px !important;--background:transparent !important;--box-shadow:none !important;--color:var(--ion-text-color) !important}fireenjin-search-bar .searchbar-input{padding-inline-end:65px !important;padding-inline-start:42px !important}fireenjin-search-bar .searchbar-search-icon{left:10px !important}@media only screen and (max-width: 500px){fireenjin-search-bar .filter-button ion-label{display:none}fireenjin-search-bar .search-bar-wrapper{padding-right:0}}";export{t as fireenjin_search_bar}