import{r as i,c as t,h as o,d as n,B as e}from"./p-8710117e.js";const s=class{constructor(o){i(this,o),this.ionChange=t(this,"ionChange",7),this.options=[],this.value=[],this.disabled=!1}render(){return o("ion-list",null,(this.options||[]).map((i=>o("ion-item",null,o("ion-checkbox",{onIonChange:t=>{var o,n;t.stopImmediatePropagation(),(null===(o=null==t?void 0:t.detail)||void 0===o?void 0:o.checked)&&!(this.value||[]).includes(null==i?void 0:i.value)&&(this.value=[...this.value,null==i?void 0:i.value]),!(null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.checked)&&(this.value||[]).includes(null==i?void 0:i.value)&&(this.value=this.value.filter((t=>(null==i?void 0:i.value)!==t))),this.ionChange.emit({value:this.value})},disabled:this.disabled,value:null==i?void 0:i.value,checked:null==i?void 0:i.checked,name:this.name,slot:"start"}),o("ion-label",null,(null==i?void 0:i.label)||(null==i?void 0:i.value)||"")))))}},l=class{constructor(o){i(this,o),this.fireenjinUpload=t(this,"fireenjinUpload",7),this.ionInput=t(this,"ionInput",7),this.type="file",this.disabled=!1,this.endpoint="upload",this.uploadData={},this.dragOver=!1}onFileChange(){if(!this.value)return!1;this.ionInput.emit({name:this.name,value:this.value})}async openFile(){const i=this.fileUploaderEl.querySelector('input[type="file"]');return i.click(),i}uploadFile(i){if(this.isLoading=!0,!window.FileReader)return;const t=new FileReader;t.onload=async t=>{2==t.target.readyState&&(t.target.error?alert("Error while reading file"):this.fireenjinUpload.emit({event:t,name:this.name,endpoint:this.endpoint,data:Object.assign({id:this.documentId,type:this.type,fileName:this.fileName,file:i,path:this.path,encodedContent:t.target.result},this.uploadData)}))},t.readAsDataURL(i)}selectFile(i){this.isLoading=!0;const t=i.target.files[0];this.selectedFile=t.name,this.uploadFile(t)}onDrop(i){if(i.preventDefault(),i.dataTransfer.items){for(var t=0;t<i.dataTransfer.items.length;t++)if("file"===i.dataTransfer.items[t].kind){var o=i.dataTransfer.items[t].getAsFile();this.selectedFile=o.name,this.uploadFile(o)}}else for(t=0;t<i.dataTransfer.files.length;t++){const o=i.dataTransfer.files[t];this.selectedFile=o.name,this.uploadFile(o),console.log("... file["+t+"].name = "+o.name)}this.dragOver=!1}onDrag(i){i.preventDefault()}onDragOver(i){i.preventDefault()}onDragEnter(i){console.log("Show UI to drop file",i),this.dragOver=!0}onDragLeave(i){console.log("Hide UI to drop file",i),this.dragOver=!1}render(){return o("ion-card",{disabled:this.disabled,class:{"drag-over":this.dragOver},onDragEnter:i=>this.onDragEnter(i),onDragOver:i=>this.onDragOver(i),onDrag:i=>this.onDrag(i),onDrop:i=>this.onDrop(i),onDragLeave:i=>this.onDragLeave(i),onClick:()=>this.openFile()},o("ion-item",{lines:"none"},o("ion-icon",{name:this.icon?this.icon:"document",slot:"start"}),o("div",null,o("h2",null,this.dragOver?"Drop File Here":this.label?this.label:"Upload a File"),o("p",null,this.selectedFile?this.selectedFile:this.defaultValue?this.defaultValue:"Select a letterhead"))),o("input",{disabled:this.disabled,type:"file",onChange:i=>this.selectFile(i),accept:this.accept?this.accept:null,value:"blah"}))}get fileUploaderEl(){return n(this)}static get watchers(){return{value:["onFileChange"]}}};async function r(i,t=1080,o=1080){return new Promise(((n,e)=>{try{let e=new Image;e.src=i,e.onload=()=>{let s;if(e.height<=o&&e.width<=t)s=i;else{e.height>e.width?t=Math.floor(o*(e.width/e.height)):o=Math.floor(t*(e.height/e.width));let i=document.createElement("canvas"),n=i.getContext("2d");i.width=e.width,i.height=e.height,n.drawImage(e,0,0,i.width,i.height);let l={width:Math.floor(e.width),height:Math.floor(e.height)},r={width:null,height:null};for(;.5*l.width>t;)r.width=Math.floor(.5*l.width),r.height=Math.floor(.5*l.height),n.drawImage(i,0,0,l.width,l.height,0,0,r.width,r.height),l.width=r.width,l.height=r.height;let h=document.createElement("canvas"),a=h.getContext("2d");h.width=t,h.height=o,a.drawImage(i,0,0,l.width,l.height,0,0,t,o),s=h.toDataURL("image/jpeg",1)}n(s)}}catch(i){e("Error resizing image!")}}))}l.style="fireenjin-input-file ion-card{width:95%;margin:15px auto;background-color:var(--ion-color-light-tint);--background-color:var(--ion-color-light-tint);padding:0}fireenjin-input-file ion-card.drag-over{opacity:0.8}fireenjin-input-file ion-card ion-item{padding:5px 0;background-color:var(--ion-color-light-tint);--ion-color-base:var(--ion-color-light-tint);--background:var(--ion-color-light-tint);pointer-events:none}fireenjin-input-file ion-card ion-item ion-icon{height:50px;width:50px;color:var(--ion-color-medium)}fireenjin-input-file ion-card ion-item h2{font-size:20px;color:var(--ion-color-dark);margin:0}fireenjin-input-file ion-card ion-item p{color:var(--ion-color-darker-grey);margin:0}fireenjin-input-file ion-card:hover{cursor:pointer}fireenjin-input-file ion-card:hover h2{color:var(--ion-color-primary)}fireenjin-input-file ion-card:hover ion-icon{color:var(--ion-color-primary)}fireenjin-input-file input{float:left;height:0;width:0;visibility:hidden}";const h=class{constructor(o){i(this,o),this.fireenjinUpload=t(this,"fireenjinUpload",7),this.ionInput=t(this,"ionInput",7),this.disabled=!1,this.showButton=!1,this.buttonText="Edit Image",this.type="photo",this.endpoint="upload",this.multiple=!1,this.resize=!1}onSuccess(i){if("upload"!==i.detail.endpoint||i.detail.name!==this.name)return!1;this.loading=!1}onPhotoChange(){this.updatePhoto()}componentDidLoad(){(null==e?void 0:e.isBrowser)&&this.updatePhoto()}updatePhoto(){this.photoUrl=this.value?this.value:this.fallback?this.fallback:null,this.value&&this.ionInput.emit({name:this.name,value:this.value})}async triggerFileInput(i){if(this.disabled)return!1;this.photoUploaderEl.querySelector('input[type="file"]').click()}selectFile(i){var t;for(const o of(null===(t=null==i?void 0:i.target)||void 0===t?void 0:t.files)||[])this.uploadPhoto(o)}uploadPhoto(i){if(this.loading=!0,!window.FileReader)return;const t=new FileReader;t.onload=async t=>{var o,n;2==t.target.readyState&&(t.target.error?alert("Error while reading file"):this.fireenjinUpload.emit({event:t,endpoint:this.endpoint,name:this.name,data:{id:this.documentId,type:this.type,path:this.path,file:i,fileName:this.fileName,encodedContent:this.resize?r(null===(o=null==t?void 0:t.target)||void 0===o?void 0:o.result):null===(n=null==t?void 0:t.target)||void 0===n?void 0:n.result}}))},t.readAsDataURL(i)}onDrop(i){i.preventDefault(),this.uploadPhoto(i.dataTransfer.files[0])}onDrag(i){i.preventDefault()}onDragEnter(){this.showButton=!0}onDragLeave(){this.showButton=!1}getCssVarColor(i){return(null==e?void 0:e.isBrowser)?getComputedStyle(document.documentElement).getPropertyValue(`--ion-color-${i}`).replace(" ",""):i}render(){return o("div",{style:{"--fireenjin-photo-background":this.color&&(this.color.includes("#")||this.color.includes("rgb(")||this.color.includes("rgba(")||this.color.includes("hsl(")||this.color.includes("hsla("))?this.color:this.color?this.getCssVarColor(this.color):"transparent"}},o("div",{class:"upload-wrapper"},o("div",{class:this.loading?"photo is-loading":"photo",style:{backgroundImage:this.photoUrl?`url('${this.photoUrl}')`:null},onClick:i=>this.triggerFileInput(i),onDrop:i=>this.onDrop(i),onDragOver:i=>this.onDrag(i),onDragEnter:()=>this.onDragEnter(),onDragLeave:()=>this.onDragLeave()},!this.photoUrl&&this.initials?this.initials:null),this.showButton?o("ion-button",{fill:"clear",expand:"block",size:"small",onClick:i=>this.triggerFileInput(i)},this.buttonText,o("ion-icon",{name:"image",slot:"end"})):null),o("slot",null),o("input",{type:"file",onChange:i=>this.selectFile(i),accept:"image/*",multiple:this.multiple}))}get photoUploaderEl(){return n(this)}static get watchers(){return{value:["onPhotoChange"]}}};h.style='fireenjin-input-photo .upload-wrapper{display:block;margin:0 auto;height:150px;width:150px;position:relative}fireenjin-input-photo .upload-wrapper .photo{position:relative;border-radius:4px;border:2px solid var(--ion-color-light);height:150px;width:150px;margin:0 auto;display:block;background-color:var(--fireenjin-photo-background, transparent);background-repeat:no-repeat;background-size:cover;background-position:center;font-size:75px;line-height:150px;text-align:center}fireenjin-input-photo .upload-wrapper .photo.is-loading:before{border-radius:4px}fireenjin-input-photo .upload-wrapper .photo.is-loading:after{border-radius:4px}fireenjin-input-photo .upload-wrapper .photo:hover{cursor:pointer;border-color:var(--ion-color-primary)}fireenjin-input-photo input[type="file"]{height:0;width:0;visibility:hidden;opacity:0;pointer-events:none;float:left}';const a=class{constructor(o){i(this,o),this.fireenjinFetch=t(this,"fireenjinFetch",7),this.disabled=!1,this.allowEmptySelection=!1,this.lines="none",this.labelPosition="stacked",this.limit=15,this.radioSlot="start",this.results=[]}onSuccess(i){var t,o,n;"radios"===(null===(t=null==i?void 0:i.detail)||void 0===t?void 0:t.name)&&i.detail.endpoint===this.endpoint&&(this.results=(null===(n=null===(o=null==i?void 0:i.detail)||void 0===o?void 0:o.data)||void 0===n?void 0:n.results)?i.detail.data.results:[],setTimeout((()=>{this.value=this.value}),200))}fetchData(){this.endpoint&&this.fireenjinFetch.emit({name:"radios",endpoint:this.endpoint,dataPropsMap:this.dataPropsMap?this.dataPropsMap:this.resultsKey?{[this.resultsKey]:"results"}:null,params:Object.assign({data:Object.assign(Object.assign(Object.assign({},this.query?{query:this.query}:{}),this.orderBy?{orderBy:this.orderBy}:{}),{limit:this.limit?this.limit:15})},this.params?this.params:{})})}componentWillLoad(){this.fetchData()}render(){return o("ion-list",null,o("ion-radio-group",{name:this.name,value:this.value,allowEmptySelection:this.allowEmptySelection},o("ion-list-header",null,this.label),(this.options?this.options:[]).map((i=>this.optionEl?this.optionEl(i):o("ion-item",{lines:this.lines},o("ion-label",null,(null==i?void 0:i.label)||(null==i?void 0:i.value)),o("ion-radio",{mode:this.mode,color:(null==i?void 0:i.color)||this.color,disabled:this.disabled||i.disabled,slot:(null==i?void 0:i.slot)||this.radioSlot,value:(null==i?void 0:i.value)||null})))),(this.results?this.results:[]).map((i=>this.optionEl?this.optionEl(i):o("ion-item",{lines:this.lines},o("ion-label",{position:this.labelPosition},(null==i?void 0:i.label)||(null==i?void 0:i.name)||(null==i?void 0:i.value)||(null==i?void 0:i.id)),o("ion-radio",{mode:this.mode,color:(null==i?void 0:i.color)||this.color,disabled:this.disabled||(null==i?void 0:i.disabled),slot:(null==i?void 0:i.slot)||this.radioSlot,value:(null==i?void 0:i.value)||(null==i?void 0:i.id)||null}))))))}};a.style="";export{s as fireenjin_checklist,l as fireenjin_input_file,h as fireenjin_input_photo,a as fireenjin_radios}