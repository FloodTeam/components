import{r as t,c as s,h as e,a as i}from"./p-5c1a6496.js";import{f as l}from"./p-aa65f47a.js";const r=class{constructor(e){t(this,e),this.ftLoad=s(this,"ftLoad",7),this.ftSelect=s(this,"ftSelect",7),this.ftSearch=s(this,"ftSearch",7),this.disabled=!1,this.loading=!1,this.records=[],this.delay=1e3,this.emailRequired=!1,this.userIsSelected=!1}async setResults(t){try{this.records="string"==typeof t?JSON.parse(t):t&&t.length>0?t:this.userSelectEl.getAttribute("records")?JSON.parse(this.userSelectEl.getAttribute("records")):[]}catch(t){console.log(t),this.records=[]}return this.records}async setUser(t,s){try{const s="string"==typeof t?JSON.parse(t):t||(this.userSelectEl.getAttribute("user")?JSON.parse(this.userSelectEl.getAttribute("user")):null);if(this.emailRequired&&!s.user_email||s&&s.user_email&&-1===s.user_email.indexOf("@"))return this.userIsSelected=!1,this.user=null,!1;this.user=s,this.userIsSelected=!!this.user}catch(t){console.log(t),this.userIsSelected=!1,this.user=null}return this.ftSelect.emit({event:s,user:this.user}),this.user}async reset(){return this.user=null,this.userIsSelected=!1,!0}onUserChange(t,s){t!==s&&this.setUser(this.user)}async componentDidLoad(){let t;await this.setResults(this.records),await this.setUser(this.user),this.ftInput$=l(this.userSelectEl,"ftInput").subscribe((async s=>{clearTimeout(t),t=setTimeout((()=>{this.ftSearch.emit({event:s,query:s.detail.value})}),this.delay)}))}render(){return e("div",{class:"user-select-wrapper"},e("ion-content",null,e("div",{class:"user-search-top"},this.userIsSelected?null:e("floodteam-input",{iconLeft:"search",value:this.query?this.query:null,label:"Search",required:!0})),e("div",{class:this.loading?"is-loading user-list":"user-list"},this.records?this.records.map((t=>e("ul",null,this.userIsSelected?null:e("li",{onClick:s=>this.setUser(t,s)},e("div",{class:"user-select-avatar"},e("img",{class:"avatar",src:t.user_avatar})),e("div",{class:"user-select-text"},e("span",null,t.user_name)," ",e("span",null,t.user_email)),e("div",{class:"user-select-icon"},e("ion-icon",{class:this.user&&this.user.user_id===t.user_id?"user-select-checkmark selected-user":"user-select-checkmark",name:"checkmark-circle"})))))):null,this.user?e("ul",null,e("li",null,e("div",{class:"user-select-avatar"},e("img",{class:"avatar",src:this.user.user_avatar})),e("div",{class:"user-select-text"},e("span",null,this.user.user_name),e("span",null,this.user.user_email)),e("div",{class:"user-select-icon"},e("ion-icon",{onClick:()=>this.reset(),class:"selected-user selected-edit",name:"create"})))):null)))}get userSelectEl(){return i(this)}static get watchers(){return{user:["onUserChange"]}}};r.style="ft-user-select{display:block}ft-user-select .ft-input.sc-ft-input:focus,ft-user-select .ft-input.sc-ft-input:valid{border-bottom:0}ft-user-select .ft-input-wrapper.ft-input-has-icon-left.sc-ft-input input.sc-ft-input,ft-user-select .ft-input-wrapper.ft-input-has-icon-left.sc-ft-input label.sc-ft-input{margin-bottom:0;height:2.75rem;text-indent:35px}ft-user-select ft-input{--ft-input-margin:0 0 8px 0}ft-user-select .user-list ul{list-style:none;padding:0;margin:0}ft-user-select .user-list ul li{display:flex;flex-direction:row;justify-content:space-between;padding:8px 0;position:relative}ft-user-select .user-list ul li div.user-select-avatar{margin-right:3%}ft-user-select .user-list ul li div.user-select-text{display:flex;flex-direction:column;margin-left:0;margin-right:auto}ft-user-select .user-list ul li div.user-select-text span{display:inline-block;width:100%;text-align:left;padding:0 0 0.25rem 0}ft-user-select .user-list ul li div.user-select-icon{position:absolute;width:45px;height:45px;top:10px;right:30px;color:#ccc}ft-user-select .user-list ul li .selected-user{color:var(--theme-primary)}ft-user-select .user-list ul li img.avatar{width:40px;height:40px;border-radius:50%}ft-user-select .user-list ul li:hover{cursor:pointer;color:var(--theme-secondary)}ft-user-select .user-list ul li:hover div.user-select-icon{color:var(--theme-secondary)}ft-user-select .user-list ion-icon.user-select-checkmark{width:40px;height:40px}ft-user-select .user-list ion-icon.selected-edit{width:40px;height:40px}";export{r as floodteam_user_select}